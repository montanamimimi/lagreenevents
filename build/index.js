(()=>{"use strict";class t{constructor(){this.burger=document.getElementById("hamburger"),this.burger&&this.burger.addEventListener("click",t=>{this.burger.classList.toggle("is-active"),document.querySelector(".mobile-nav").classList.toggle("mobile-nav--active")})}}class e{constructor(){this.container=document.getElementById("scrollContainer"),this.container&&(this.inner=document.getElementById("scrollInner"),this.container.addEventListener("mouseenter",this.scroll.bind(this)),this.container.addEventListener("mouseleave",this.stop.bind(this)))}scroll(){const t=window.innerWidth;let e=1780;t<1e3&&(e=1400);const s=t-e;if(s<0){const t=Math.abs(s)/100;this.inner.style.transition=`transform ${t}s linear`,this.inner.style.transform=`translateX(${s}px)`}}stop(){this.inner.style.transition="transform 0.5s ease-out",this.inner.style.transform="translateX(0)"}}class s{constructor(){this.addListeners()}addListeners(){const t=document.getElementById("contact-form"),e=document.getElementById("ask__form"),s=document.getElementById("contacts-form");t&&this.listenToForm(t,"contact-form__button","form-result"),e&&this.listenToForm(e,"ask__button","ask__result"),s&&this.listenToForm(s,"contacts-form__button","contacts-form__result")}listenToForm(t,e,s){t.addEventListener("submit",async i=>{i.preventDefault();const a=new FormData(t),r=this.validateForm(a,s),n=t.querySelector(`.${e}`);if(r){n.classList.add(`${e}--loading`);const i=await fetch(ajax_object.ajax_url,{method:"POST",body:new URLSearchParams({action:"send_custom_email",name:a.get("name"),phone:a.get("phone"),email:a.get("email"),message:a.get("message")})});200==i.status&&this.clearForm(t);const r=await i.text();document.querySelector(`.${s}`).innerHTML=r,n.classList.remove(`${e}--loading`)}})}validateForm(t,e){let s=!1,i="";t.has("phone")&&(this.isPhoneNumber(t.get("phone"))||(s=!0,i+="Please enter phone. ")),t.has("message")&&(t.get("message")||(s=!0,i+="Please enter your question. "));const a=document.querySelector(`.${e}`);return s?(a.innerHTML=i,a.classList.add(`${e}--error`)):(a.innerHTML="",a.classList.remove(`${e}--error`)),!s}clearForm(t){const e=t.querySelectorAll("input"),s=t.querySelectorAll("textarea");e.forEach(t=>{t.value=""}),s.forEach(t=>{t.value=""})}isPhoneNumber(t){return/^(\+?\d{1,3}[- ]?)?\d{10}$/.test(t)}}class i{constructor(){this.gallery=document.getElementById("gallery"),this.gallery&&(this.counter=+this.gallery.dataset.counter,this.urls=this.getUrlArray(),this.arrows=this.gallery.querySelectorAll(".gallery__arrow"),this.images=this.gallery.querySelectorAll(".gallery__image"),this.dots=this.gallery.querySelectorAll(".gallery__dot"),this.arrows.forEach(t=>{t.addEventListener("click",t=>{this.changeImages(t.target)})}),this.dots.forEach(t=>{t.addEventListener("click",e=>{t.classList.contains("gallery__dot--active")||this.changeImages(e.target)})}))}getUrlArray(){const t={};return document.querySelectorAll(".gallery-data").forEach(e=>{t[e.dataset.key]=e.dataset.url}),t}changeImages(t){const e=this.getNewIds(t);this.images.forEach((t,s)=>{t.classList.contains("gallery__image--small")?t.style.backgroundImage="url('"+this.urls[e[s]]+"')":(t.classList.add("gallery__image--active"),setTimeout(()=>{t.style.backgroundImage="url('"+this.urls[e[s]]+"')",t.classList.remove("gallery__image--active")},500)),t.dataset.id=e[s]});const s=e[1];this.dots.forEach(t=>{t.dataset.id==s?t.classList.add("gallery__dot--active"):t.classList.remove("gallery__dot--active")})}getNewIds(t){let e=[];if(this.images.forEach(s=>{const i=+s.dataset.id;let a=i;t.classList.contains("gallery__arrow--right")&&(a=i==this.counter-1?0:i+1),t.classList.contains("gallery__arrow--left")&&(a=0==i?this.counter-1:i-1),e.push(a)}),t.classList.contains("gallery__dot")){const s=+t.dataset.id;e=0==s?[this.counter-1,0,1]:s==this.counter-1?[this.counter-2,s,0]:[s-1,s,s+1]}return e}}class a{constructor(){this.gallery=document.getElementById("testimonials"),this.gallery&&(this.slider=document.getElementById("testimonialSlider"),this.arrows=this.gallery.querySelectorAll(".testimonials__arrow"),this.leftArrows=this.gallery.querySelectorAll(".testimonials__arrow--left"),this.rightArrows=this.gallery.querySelectorAll(".testimonials__arrow--right"),this.currentIndex=0,window.innerWidth>1300?this.visibleItems=3:this.visibleItems=1,this.totalItems=this.slider.children.length,this.dots=this.gallery.querySelectorAll(".testimonials__dot"),this.arrows.forEach(t=>{t.addEventListener("click",t=>{this.checkButton(t.target)})}),this.dots.forEach(t=>{t.addEventListener("click",e=>{t.classList.contains("testimonials__dot--active")||this.checkButton(e.target)})}),window.addEventListener("resize",()=>{this.resetData()}))}resetData(){this.currentIndex=0,this.slider.style.transform="unset",this.disableButtons(this.leftArrows),this.enableButtons(this.rightArrows),window.innerWidth>1300?this.visibleItems=3:this.visibleItems=1,this.dots.forEach(t=>{0==t.dataset.id?t.classList.add("testimonials__dot--active"):t.classList.remove("testimonials__dot--active")})}enableButtons(t){t.forEach(t=>{t.classList.remove("testimonials__arrow--inactive")})}disableButtons(t){t.forEach(t=>{t.classList.add("testimonials__arrow--inactive")})}checkButton(t){if(t.classList.contains("testimonials__arrow--right")&&this.currentIndex<this.totalItems-this.visibleItems&&(this.currentIndex++,this.updateSlider(),this.enableButtons(this.leftArrows),this.currentIndex==this.totalItems-this.visibleItems&&this.disableButtons(this.rightArrows)),t.classList.contains("testimonials__arrow--left")&&this.currentIndex>0&&(this.enableButtons(this.rightArrows),this.currentIndex--,this.updateSlider(),0==this.currentIndex&&this.disableButtons(this.leftArrows)),t.classList.contains("testimonials__dot")){const e=+t.dataset.id;this.currentIndex=e,this.updateSlider(100*-e),0==e?(this.disableButtons(this.leftArrows),this.enableButtons(this.rightArrows)):e==this.totalItems-1?(this.disableButtons(this.rightArrows),this.enableButtons(this.leftArrows)):(this.enableButtons(this.rightArrows),this.enableButtons(this.leftArrows))}}updateSlider(t=!1){t||(t=-this.currentIndex*(100/this.visibleItems)),this.slider.style.transform=`translateX(${t}%)`;const e=-t/100;this.dots.forEach(t=>{t.dataset.id==e?t.classList.add("testimonials__dot--active"):t.classList.remove("testimonials__dot--active")})}}class r{constructor(){this.calculator=document.getElementById("calculator"),this.calculator&&(this.data=JSON.parse(this.calculator.dataset.inputs),this.id=0,this.answers=[],this.question=this.calculator.querySelector(".calculator__question"),this.current=document.getElementById("calcCurrent"),this.total=+this.current.dataset.total-1,this.back=document.getElementById("calcBackBtn"),this.next=document.getElementById("calcNextBtn"),this.error=this.calculator.querySelector(".calculator__error"),this.options=this.calculator.querySelector(".calculator__options"),this.contacts=this.calculator.querySelector(".calculator__contacts"),this.back.addEventListener("click",t=>{t.target.classList.contains("btn--disabled")||(this.checkAnswers(!1),this.changeSlide(-1)),"none"==this.options.style.display&&(this.options.style.display="block",this.contacts.style.display="none")}),this.next.addEventListener("click",t=>{this.id>this.total?this.sendForm():this.checkAnswers(!0)&&this.changeSlide(1)}))}async sendForm(){const t=this.calculator.querySelector('input[type="text"]'),e=this.calculator.querySelector('input[type="phone"]');let s=!1;if(this.isPhoneNumber(e.value)?this.error.innerHTML="":(this.error.innerHTML="Please enter valid phone",s=!0),!s){this.next.classList.add("calculator__next--loading");const s=await fetch(ajax_object.ajax_url,{method:"POST",body:new URLSearchParams({action:"send_custom_email",name:t.value,phone:e.value,answers:this.answers})});200==s.status&&(this.back.style.display="none",this.next.style.display="none",console.log("It OKAY"));const i=await s.text();this.contacts.innerHTML=i}}isPhoneNumber(t){return/^(\+?\d{1,3}[- ]?)?\d{10}$/.test(t)}checkAnswers(t){const e=this.calculator.querySelectorAll('input[type="radio"]');let s=!1;return e.forEach(t=>{t.checked&&(s=!0,this.saveAnswer(+t.value))}),this.error.innerHTML=!s&&t?"Please pick one option":"",s}saveAnswer(t){this.data[this.id]&&(this.answers[this.id]=this.data[this.id].answers[t].answer_text)}changeSlide(t){if(-1!=t||0!=this.id){if(1==t&&this.id==this.total)return this.showForm(),void(this.id=this.id+t);this.id=this.id+t,this.current.innerHTML=this.id+1,0==this.id?this.back.classList.add("btn--disabled"):this.back.classList.remove("btn--disabled"),this.changeText()}}showForm(){this.question.innerHTML="How to contact with you?",this.options.style.display="none",this.contacts.style.display="flex"}changeText(){this.question.innerHTML=this.data[this.id].question_text,this.options.innerHTML="",this.data[this.id].answers.forEach((t,e)=>{const s=document.createElement("div");s.className="calculator__option";const i=document.createElement("label");i.htmlFor="calc"+e;const a=document.createElement("input");a.type="radio",a.id="calc"+e,a.name="calculator",a.value=e,this.answers[this.id]&&t.answer_text==this.answers[this.id]&&(a.checked=!0);const r=document.createElement("span");r.className="custom-radio";const n=document.createTextNode(t.answer_text);i.appendChild(a),i.appendChild(r),i.appendChild(n),s.appendChild(i),this.options.appendChild(s)})}}document.addEventListener("DOMContentLoaded",()=>{new t,new e,new s,new i,new a,new r})})();